<tiddlers>
<div id="03d83617-4693-4120-9279-171a56c34219" modified="20230309184755" modifier="Poul Staugaard" tags="systemConfig" title="YouTubePlugin" >
<pre>
/***
|''Name:''|YouTubePlugin|
|''Description:''|Facilitates embedding youtube content with optional subtitles|
|''Documentation:''|[[YouTubePlugin documentation]]|
|''Version:''|2.0|
|''Date:''|2023-03-09|
|''Author:''|PoulStaugaard (poul (dot) staugaard (at) gmail (dot) com)|
|''License:''|[[BSD open source license]]|
|''~CoreVersion:''|2.1.0|
|''Browser:''|Chrome; Safari; Firefox;|

''Usage:''
{{{&lt;&lt;}}}//{{{youtube video-id [width [height]]}}}//{{{&gt;&gt;}}}
	where:	width defaults to 100% (of content column width)
			height defaults to 58% (of content column width)
***/
//{{{
config.macros.youtube = {
	textLocation: {},
	paused: {},
	handler: function (place, macroName, params, wikifier, paramString) {
		if (params.length == 0)
			throw(&quot;Missing required parameter: youtube video id&quot;);
		var vid = params.shift(); // parameter 1: youtube video id
		// var cw = place.offsetWidth;
		var w = params.shift() || "100%"; // specified or default width
		var h = params.shift();
		var rh = false;
		if (h)
		{
			if (h.endsWith("%"))
			{
				h = h.substring(0, h.length - 1);
				rh = true;
			}
		}
		if (rh || isNaN(h)) // unless specified in pixels
		{
			if (isNaN(h))
				h = 58; // default height in % of width
			if (w.endsWith("%"))
				h = place.offsetWidth * h / 100;
			else
				h = w * h / 100;
		}
		var t = createTiddlyElement(place,'div');
		t.innerHTML = '&lt;iframe width="' + w + '" height="' + h + 
			'" frameborder="0" src="https://www.youtube.com/embed/' + vid 
			+ '" allowfullscreen&gt;';
	}
}
//}}}
</pre>
</div>
</tiddlers>